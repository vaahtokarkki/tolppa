{"version":3,"sources":["App.js","reportWebVitals.js","index.js"],"names":["axios","defaults","withCredentials","api","create","URL","formatMinutes","minutes","Math","floor","App","props","useState","duration","setDuration","details","setDetails","message","setMessage","window","localStorage","getItem","token","setToken","intervalActive","setIntervalActive","Date","endDate","setEndDate","endTime","setEndTime","addQuick","setAddQuick","setError","variant","error","fetchDetails","useCallback","a","post","resp","data","reservations","state","licensePlate","temperature","consumption","console","log","response","status","callback","delay","savedCallback","useRef","useEffect","current","tick","id","setInterval","clearInterval","useInterval","submit","getEndTimeAndDate","eco","toString","deleteTimers","delete","moment","format","add","endDateMoment","endTimeMoment","className","Grid","style","maxWidth","width","Alert","severity","item","xs","Card","CardContent","CircularProgress","Typography","activeTimer","timers","dateFormat","now","find","dateStart","dateEnd","timeStart","timeEnd","start","end","isBefore","isAfter","findActiveTimer","heatedTime","diff","length","renderDetails","List","map","index","active","ListItem","ListItemAvatar","ListItemText","primary","secondary","utils","DateFnsUtils","Fab","color","onClick","InputLabel","htmlFor","Slider","label","value","min","max","onChange","e","aria-labelledby","disableToolbar","margin","KeyboardButtonProps","ampm","textAlign","paddingTop","Button","disabled","size","open","padding","TextareaAutosize","event","newToken","target","setItem","rowsMin","rowsMax","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.2a0a1b69.chunk.js","sourcesContent":["import React, {\n  useState,\n  useEffect,\n  useRef,\n  useCallback,\n} from 'react'\nimport Typography from '@material-ui/core/Typography'\nimport Card from '@material-ui/core/Card'\nimport CardContent from '@material-ui/core/CardContent'\nimport Grid from '@material-ui/core/Grid'\nimport Slider from '@material-ui/core/Slider'\nimport Button from '@material-ui/core/Button'\nimport TextareaAutosize from '@material-ui/core/TextareaAutosize'\nimport Fab from '@material-ui/core/Fab'\nimport AccessAlarms from '@material-ui/icons/AccessAlarms'\nimport SpeedIcon from '@material-ui/icons/Speed'\nimport CircularProgress from '@material-ui/core/CircularProgress'\nimport axios from 'axios'\nimport {\n  MuiPickersUtilsProvider,\n  KeyboardTimePicker,\n  KeyboardDatePicker,\n} from '@material-ui/pickers'\nimport List from '@material-ui/core/List'\nimport ListItem from '@material-ui/core/ListItem'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar'\nimport PowerSettingsNewIcon from '@material-ui/icons/PowerSettingsNew'\nimport DateFnsUtils from '@date-io/date-fns'\nimport Alert from '@material-ui/lab/Alert'\nimport InputLabel from '@material-ui/core/InputLabel'\nimport moment from 'moment'\n\nimport './tolppa.css'\n\naxios.defaults.withCredentials = true\n\nconst api = axios.create()\nconst URL =\n  !process.env.NODE_ENV || process.env.NODE_ENV === 'development'\n    ? 'http://localhost:1337'\n    : 'https://tolppa-gateway-nas5m5k7jq-lz.a.run.app'\n\nconst App = (props) => {\n  const [duration, setDuration] = useState(60)\n  const [details, setDetails] = useState(null)\n  const [message, setMessage] = useState(null)\n  const [token, setToken] = useState(\n    window.localStorage.getItem('token') || '',\n  )\n  const [intervalActive, setIntervalActive] = useState(true)\n  const [endDate, setEndDate] = useState(new Date())\n  const [endTime, setEndTime] = useState(new Date())\n  const [addQuick, setAddQuick] = useState(true)\n\n  const setError = (message) => {\n    setMessage({\n      variant: 'error',\n      message,\n    })\n    setIntervalActive(false)\n    setDetails({ error: true })\n  }\n\n  const fetchDetails = useCallback(async () => {\n    try {\n      const resp = await api.post(`${URL}/details`, { token })\n      const {\n        reservations,\n        state,\n        licensePlate,\n        temperature,\n        consumption,\n      } = resp.data\n      setDetails({\n        reservations,\n        state,\n        licensePlate,\n        temperature,\n        consumption,\n      })\n    } catch (e) {\n      console.log(e)\n      // Req blocked\n      if (!e.response) return setError('Unknown error!')\n\n      const status = e.response.status\n      let message\n      switch (status) {\n        case 400:\n          message = 'You need to set token!'\n          break\n        case 401:\n          message = 'Login failed'\n          break\n        default:\n          message = 'Unknown error!'\n          break\n      }\n      setError(message)\n    }\n  }, [token])\n\n  useInterval(fetchDetails, intervalActive ? 5000 : null)\n\n  useEffect(() => {\n    async function a() {\n      fetchDetails()\n    }\n    a()\n  }, [fetchDetails])\n\n  const onTokenChange = (event) => {\n    const newToken = event.target.value\n    window.localStorage.setItem('token', newToken)\n    setToken(newToken)\n    setIntervalActive(!!newToken)\n  }\n\n  const resetToken = () => {\n    window.localStorage.setItem('token', '')\n    setToken('')\n    setIntervalActive(false)\n  }\n\n  const submit = async () => {\n    const data = {\n      ...getEndTimeAndDate(),\n      duration,\n      eco: false,\n      token,\n    }\n    try {\n      await api.post(`${URL}/timer`, data)\n      setMessage({\n        variant: 'success',\n        message: 'Timer sent to gateway successfully!',\n      })\n      setDetails(null)\n      fetchDetails()\n    } catch (e) {\n      setMessage({ variant: 'error', message: e.toString() })\n    }\n  }\n\n  const deleteTimers = async () => {\n    try {\n      await api.delete(`${URL}/timer`, { data: { token } })\n      setMessage({\n        variant: 'success',\n        message: 'All timers deleted successfully!',\n      })\n      fetchDetails()\n    } catch (e) {\n      setMessage({ variant: 'error', message: e.toString() })\n    }\n  }\n\n  const getEndTimeAndDate = () => {\n    if (addQuick)\n      return {\n        endDate: moment().format('DD.MM.YYYY'),\n        endTime: moment().add(duration, 'minutes').format('HH:mm'),\n      }\n    const endDateMoment = moment(endDate)\n    const endTimeMoment = moment(endTime)\n    return {\n      endDate: endDateMoment.format('DD.MM.YYYY'),\n      endTime: endTimeMoment.format('HH:mm'),\n    }\n  }\n\n  const renderMessage = () =>\n    message ? (\n      <Alert severity={message.variant}>{message.message}</Alert>\n    ) : null\n\n  const renderDetails = () => {\n    if (!details)\n      return (\n        <Grid item xs={12} className=\"row\">\n          <Card>\n            <CardContent>\n              <CircularProgress />\n            </CardContent>\n          </Card>\n        </Grid>\n      )\n    if (details.error)\n      return (\n        <Grid item xs={12} className=\"row\">\n          <Card>\n            <CardContent>\n              <Typography variant=\"h6\">\n                Tolppa status is unknown\n              </Typography>\n            </CardContent>\n          </Card>\n        </Grid>\n      )\n\n    const activeTimer = findActiveTimer(details.reservations || [])\n    const heatedTime = activeTimer\n      ? moment().diff(\n          moment(\n            `${activeTimer.dateStart} ${activeTimer.timeStart}`,\n            'DD.MM.YYYY HH:mm',\n          ),\n          'minutes',\n        )\n      : 0\n\n    return (\n      <Grid item xs={12} className=\"row\">\n        <Card>\n          <CardContent\n            className={\n              details && details.state ? 'status-on' : 'status-off'\n            }\n          >\n            {details && details.state ? (\n              <>\n                <Typography variant=\"h6\">\n                  Your tolppa is on!\n                </Typography>\n                <Typography variant=\"body1\">\n                  Car heated for {heatedTime}min!{' '}\n                  {`${details.consumption}W`}\n                </Typography>\n              </>\n            ) : (\n              <Typography variant=\"h6\">\n                Your tolppa is off!\n              </Typography>\n            )}\n          </CardContent>\n          <CardContent>\n            <Typography variant=\"subtitle1\">\n              {details.licensePlate}\n            </Typography>\n            <Typography variant=\"body1\">\n              {details.temperature}Â°C, {details.reservations.length}/2\n              timers\n            </Typography>\n          </CardContent>\n        </Card>\n      </Grid>\n    )\n  }\n\n  const renderReservations = () => {\n    if (!details || !details.reservations || !details.reservations.length) return null\n    return (\n      <Grid item xs={12} className=\"row\">\n        <Card>\n          <List>\n            {details.reservations.map(\n              ({ dateStart, timeStart, timeEnd, active }, index) => {\n                const diff = moment(\n                  `${dateStart} ${timeEnd}`,\n                  'DD.MM.YYYY HH:mm',\n                ).diff(\n                  moment(\n                    `${dateStart} ${timeStart}`,\n                    'DD.MM.YYYY HH:mm',\n                  ),\n                  'minutes',\n                )\n                return (\n                  <ListItem key={index}>\n                    <ListItemAvatar>\n                      <PowerSettingsNewIcon />\n                    </ListItemAvatar>\n                    <ListItemText\n                      primary={`${dateStart}, ${timeStart}-${timeEnd}`}\n                      secondary={`${diff} minutes`}\n                    />\n                  </ListItem>\n                )\n              },\n            )}\n          </List>\n        </Card>\n      </Grid>\n    )\n  }\n\n  const renderForm = () =>\n    addQuick ? (\n      <>\n        <Grid item xs={12}>\n          <InputLabel htmlFor=\"dur\">\n            {formatMinutes(duration)}\n          </InputLabel>\n          <Slider\n            label=\"Duration\"\n            value={duration}\n            min={15}\n            max={200}\n            onChange={(e, value) => setDuration(value)}\n            aria-labelledby=\"continuous-slider\"\n          />\n        </Grid>\n      </>\n    ) : (\n      <>\n        <Grid item xs={12}>\n          <InputLabel htmlFor=\"dur\">\n            {formatMinutes(duration)}\n          </InputLabel>\n          <Slider\n            label=\"Duration\"\n            value={duration}\n            min={15}\n            max={200}\n            onChange={(e, value) => setDuration(value)}\n            aria-labelledby=\"continuous-slider\"\n          />\n        </Grid>\n        <Grid item xs={12} className=\"form-row\">\n          <KeyboardDatePicker\n            disableToolbar\n            variant=\"inline\"\n            format=\"dd.MM.yyyy\"\n            margin=\"normal\"\n            id=\"date-picker-inline\"\n            label=\"Date for new time\"\n            value={endDate}\n            onChange={setEndDate}\n            KeyboardButtonProps={{\n              'aria-label': 'change date',\n            }}\n          />\n        </Grid>\n        <Grid item xs={12} className=\"form-row\">\n          <KeyboardTimePicker\n            ampm={false}\n            margin=\"normal\"\n            id=\"time-picker\"\n            label=\"When the car should be ready\"\n            value={endTime}\n            onChange={setEndTime}\n            KeyboardButtonProps={{\n              'aria-label': 'change time',\n            }}\n          />\n        </Grid>\n      </>\n    )\n\n  return (\n    <div className=\"container\">\n      <Grid style={{ maxWidth: 300, width: 300 }}>\n        {renderMessage()}\n        {renderDetails()}\n        {renderReservations()}\n        <MuiPickersUtilsProvider utils={DateFnsUtils}>\n          <Grid item xs={12} className=\"row\">\n            <Card>\n              <CardContent>\n                <Grid>\n                  <Grid item xs={12} className=\"center\">\n                    <Fab\n                      variant=\"extended\"\n                      color=\"primary\"\n                      onClick={() => setAddQuick(!addQuick)}\n                    >\n                      {addQuick ? (\n                        <>\n                          <AccessAlarms /> Schedule car heating\n                        </>\n                      ) : (\n                        <>\n                          <SpeedIcon /> Add quick timer\n                        </>\n                      )}\n                    </Fab>\n                  </Grid>\n                  {renderForm()}\n\n                  <Grid\n                    item\n                    xs={12}\n                    style={{\n                      textAlign: 'center',\n                      paddingTop: '1rem',\n                    }}\n                  >\n                    <Button\n                      variant=\"contained\"\n                      disabled={!token || (details && details.error)}\n                      color=\"primary\"\n                      onClick={submit}\n                    >\n                      Heat the car\n                    </Button>\n                  </Grid>\n                </Grid>\n              </CardContent>\n            </Card>\n          </Grid>\n          <Card style={{ textAlign: 'center' }}>\n            <CardContent className=\"button-card\">\n              <Button\n                size=\"large\"\n                color=\"secondary\"\n                variant=\"outlined\"\n                disabled={!token || (details && details.error)}\n                onClick={deleteTimers}\n              >\n                Clear all timers\n              </Button>\n              <Button\n                size=\"large\"\n                color=\"primary\"\n                variant=\"outlined\"\n                onClick={() =>\n                  window.open(\n                    'https://eparking.fi/fi/u#/reservations',\n                  )\n                }\n              >\n                Manage reservations!\n              </Button>\n            </CardContent>\n          </Card>\n          <Grid item xs={12} className=\"row pad\">\n            <Card style={{ padding: '.7rem .5rem' }}>\n              <InputLabel>Add cookies for sign in</InputLabel>\n              <TextareaAutosize\n                value={token}\n                onChange={onTokenChange}\n                rowsMin={10}\n                rowsMax={10}\n              />\n              <Button\n                size=\"small\"\n                color=\"primary\"\n                variant=\"outlined\"\n                onClick={resetToken}\n              >\n                Clear cookies\n              </Button>\n            </Card>\n          </Grid>\n        </MuiPickersUtilsProvider>\n      </Grid>\n    </div>\n  )\n}\n\nfunction formatMinutes(minutes) {\n  if (minutes < 60) return `${minutes}min`\n  return `${Math.floor(minutes / 60)}h ${minutes % 60}min`\n}\n\nfunction findActiveTimer(timers) {\n  const dateFormat = 'DD.MM.YYYY HH:mm'\n  const now = moment()\n  return timers.find(({ dateStart, dateEnd, timeStart, timeEnd }) => {\n    const start = moment(`${dateStart} ${timeStart}`, dateFormat)\n    const end = moment(`${dateEnd} ${timeEnd}`, dateFormat)\n    return start.isBefore(now) && end.isAfter(now)\n  })\n}\n\nfunction useInterval(callback, delay) {\n  const savedCallback = useRef()\n\n  useEffect(() => {\n    savedCallback.current = callback\n  }, [callback])\n\n  useEffect(() => {\n    function tick() {\n      savedCallback.current()\n    }\n    if (delay !== null) {\n      let id = setInterval(tick, delay)\n      return () => clearInterval(id)\n    }\n  }, [delay])\n}\n\nexport default App\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}