(this.webpackJsonptolppa=this.webpackJsonptolppa||[]).push([[0],{130:function(e,t,a){},134:function(e,t,a){"use strict";a.r(t);var n=a(8),r=a(0),c=a.n(r),s=a(14),i=a.n(s),o=a(43),l=a.n(o),u=a(66),d=a(13),j=a(67),b=a(171),m=a(172),p=a(170),h=a(180),x=a(173),O=a(175),g=a(71),v=a.n(g),f=a(17),w=a(174),y=a(181),k=a(92),C=a(176),S=a(178),D=a(179),M=a(72),T=a.n(M);a(130);v.a.defaults.withCredentials=!0;var Y=v.a.create(),P="https://tolppa-gateway-nas5m5k7jq-lz.a.run.app",F=function(e){var t=Object(r.useState)(60),a=Object(d.a)(t,2),s=a[0],i=a[1],o=Object(r.useState)(null),g=Object(d.a)(o,2),v=g[0],M=g[1],F=Object(r.useState)(null),N=Object(d.a)(F,2),A=N[0],B=N[1],H=Object(r.useState)(window.localStorage.getItem("token")||""),I=Object(d.a)(H,2),q=I[0],z=I[1],E=Object(r.useState)(new Date),J=Object(d.a)(E,2),K=J[0],L=J[1],U=c.a.useState(new Date),W=Object(d.a)(U,2),G=W[0],Q=W[1],R=function(){var e=Object(u.a)(l.a.mark((function e(){var t,a,n,r,c,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Y.post("".concat(P,"/details"),{token:q});case 3:t=e.sent,a=t.data,n=a.reservations,r=a.state,c=a.licensePlate,s=a.temperature,M({reservations:n,state:r,licensePlate:c,temperature:s}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),B({variant:"error",message:e.t0.toString().includes("400")?"You need to set token!":"Unknown error!"}),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){R()}),[]);var V=function(){var e=Object(u.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={endDate:"".concat(K.getDate(),".").concat(K.getMonth(),".").concat(K.getFullYear()),endTime:"".concat(G.getHours(),":").concat(G.getMinutes()),duration:s,eco:!1,token:q},e.next=3,Y.post("".concat(P,"/timer"),t);case 3:a=e.sent,console.log(t,a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={endDate:T()().format("DD.MM.YYYY"),endTime:T()().add(1,"hours").format("HH:mm"),duration:60,eco:!1,token:q},e.prev=1,e.next=4,Y.post("".concat(P,"/timer"),t);case 4:B({variant:"success",message:"Timer sent to gateway successfully!"}),M(null),R(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),B({variant:"error",message:e.t0.toString()});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return Object(n.jsx)("div",{className:"container",children:Object(n.jsxs)(p.a,{children:[A?Object(n.jsx)(C.a,{severity:A.variant,children:A.message}):null,v?Object(n.jsx)(p.a,{item:!0,xs:12,className:"row",children:Object(n.jsx)(b.a,{children:Object(n.jsxs)(m.a,{children:[Object(n.jsx)(j.a,{variant:"h6",children:v.licensePlate}),v.state?Object(n.jsx)(S.a,{color:"primary",style:{backgroundColor:"green"},label:"Your tolppa is on!"}):Object(n.jsx)(S.a,{color:"primary",style:{backgroundColor:"#B00020"},label:"Your tolppa is off!"}),Object(n.jsxs)(j.a,{variant:"body1",children:[v.temperature,"C, ",v.reservations.length,"/2 timers"]})]})})}):null,Object(n.jsx)(b.a,{style:{textAlign:"center"},children:Object(n.jsx)(m.a,{children:Object(n.jsx)(x.a,{size:"large",color:"primary",variant:"outlined",onClick:function(){return window.open("https://eparking.fi/fi/u#/reservations")},children:"Manage reservations!"})})}),Object(n.jsxs)(f.a,{utils:k.a,children:[Object(n.jsx)(p.a,{item:!0,xs:12,className:"row",children:Object(n.jsx)(b.a,{children:Object(n.jsx)(m.a,{children:Object(n.jsxs)(p.a,{children:[Object(n.jsxs)(p.a,{item:!0,xs:12,children:[Object(n.jsxs)(D.a,{htmlFor:"dur",children:["Duration ",s,"min"," ",s>=60?Math.round(s/60)+"h":null]}),Object(n.jsx)(h.a,{label:"Duration",value:s,min:15,max:200,onChange:function(e,t){return i(t)},"aria-labelledby":"continuous-slider"})]}),Object(n.jsx)(p.a,{item:!0,xs:12,className:"form-row",children:Object(n.jsx)(w.a,{disableToolbar:!0,variant:"inline",format:"dd.MM.yyyy",margin:"normal",id:"date-picker-inline",label:"Date for new time",value:K,onChange:L,KeyboardButtonProps:{"aria-label":"change date"}})}),Object(n.jsx)(p.a,{item:!0,xs:12,className:"form-row",children:Object(n.jsx)(y.a,{ampm:!1,margin:"normal",id:"time-picker",label:"When the car should be ready",value:G,onChange:Q,KeyboardButtonProps:{"aria-label":"change time"}})}),Object(n.jsx)(p.a,{item:!0,xs:12,style:{textAlign:"center",paddingTop:"1rem"},children:Object(n.jsx)(x.a,{variant:"contained",disabled:!q,color:"primary",onClick:V,children:"Heat the car"})}),Object(n.jsx)(p.a,{item:!0,xs:12,style:{textAlign:"center",paddingTop:"1rem"},children:Object(n.jsx)(x.a,{variant:"outlined",disabled:!q,color:"primary",onClick:X,children:"Add quick timer!"})})]})})})}),Object(n.jsx)(p.a,{item:!0,xs:12,className:"row pad",children:Object(n.jsxs)(b.a,{style:{padding:".7rem .5rem"},children:[Object(n.jsx)(D.a,{children:"Add cookies for sign in"}),Object(n.jsx)(O.a,{value:q,onChange:function(e){var t=e.target.value;window.localStorage.setItem("token",t),z(t)},rowsMin:10,rowsMax:10})]})})]})]})})},N=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,184)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),c(e),s(e)}))};i.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(F,{})}),document.getElementById("root")),N()}},[[134,1,2]]]);
//# sourceMappingURL=main.1937ce34.chunk.js.map